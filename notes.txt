- MPI
  - using quad tree:
    - one quad tree per processor
      -At startup, master thread spawns other threads
        - provides limit of each scene to each thread
      - At each frame:
        - compute forces of owned agents
        - get new positions of nodes
          - if poitions within boundaries, move
          - if positions outside boundaries:
            - pass agent to appropriate processor
            - remove agent from owned agents list
        - send all owned agents to master
        -if master: write all agents to outputwriter
  -dealing with MPI and OOP:
    - example and superscenee should run on one thread. The remainign scenes
    should each run on its own thread.
challenges:

- obstacles are not points, but edges. Hence, some obstacles may be spanning multiple processors.
- the eyesight of the agent is too big cause overlaps processors -> agent may need to see
all agents on all processors...
- cannot assume that communication goes to only a given processor -> agent may
move to any processor. Hence, comm can be up to all processors at each frame.
Hence:
  - after each frame, each processor sends its own agents to all processrs,
  updates its owned agents vector based on boundaries


- not using quad tree:
  -divide by hrizontal bands
  - make 1 scene object per processor
    - each processor agnostic of scene features on other processors
  - each processor has 5 bands (vectors):
    1. close agents in above processor
    2. own agents close to above processor
    3. own agents far from above and below processor
    4. own agents close to below processor.
    5. close agents in below processor.






1. Library usage
- Setup
  - Create output writer ow
    - Set ow properties
  - Create Tsene pedscene
  - Link ow and pedscene
  - Create Twaypoints
  - Create obstacles
  - Add obstacles to pedscene
  - Create agents
    - add waypoints to agents
    - set positions
    - add agent to scene
- Simulation
  - for each timestep:
    -call moveAgents() on pedscene
- Cleanup

2. Library Operation
- Overarching class is PedScene
  - holds:
    - agents vector
    - tree
    - obstacle vextor
    - Twaypoint vector
  - Everythin set-up as in library usage
  - all objects are creates separately and then linked via public methods to Scene
  - only Ttree is created in constructor
- sim operation: moveAgents()
  - update time step
  - update forces via computeForces()
    -agent->computeForces()
  - move agents by forces move()
    -
  - output positions

- getNeighbors():
  - if no tree, return all
  - else:
    -recursively (using stack) go down the tree for nodes that are within range
    -if leaf, add all agents in node

- Main class is Tagent
  - Constructor:
    - set up stuff
    - set random max speed
    - set relative forces' importances
    - set a radius, obstacle force, and relax time
    - set waypoint behavior

- agent->computeForces():
  - First, get all neighbors via getNeighbors()
  - compute desieredForce()
    - no iterations
    - need info about other agents
    -
  - compute lookaheadforce()
    - go through all neighbors, compute some stuff
  - compute socialforce()
    - go through all neighbors
  - compute factorobstacleforce()
    - go through all obstacles in the scene
  - compute myForce()

CHANGES TODO:
  - agent:
    - set neighborhoodRange as parameter
    - set quad tree capacity and min cap as a parameter
    - set maxDist social force as param
    - remove removeWaypoint bug

BAD STUFF:
  - checking distances of neighbors in forces constantly
